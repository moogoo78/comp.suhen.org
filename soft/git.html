

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GIT &mdash; CompDocs 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Command 常用指令" href="../command_line.html" />
    <link rel="prev" title="Emacs" href="emacs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> CompDocs
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../programming.html">Programming 程式開發</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web_develop.html">Web Develop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web_devoops.html">Web DevOops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Design</a></li>
</ul>
<p class="caption"><span class="caption-text">Programming Language</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../javascript.html">JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../html.html">HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../css.html">CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lua.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts_matrix.html">比較</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_frameworks.html">Python Web Frameworks</a></li>
</ul>
<p class="caption"><span class="caption-text">Software</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="emacs.html">Emacs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">GIT</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-to">How to</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sync-remote-repo">sync remote repo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commit-merge-commit">減少 commit(merge commit )</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-clonebranch">git clone某一個branch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-format-patch-commit-diff">git format-patch  把修改紀錄依照 commit 分別作出 diff 來</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commit-branch">commit 錯 branch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reference">Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#git-clone-add">git clone / add</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-reset-revert">git reset / revert</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-log">git log</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-commit-checkout-stash">git commit / checkout / stash</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-branch-merge">git branch / merge</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-tag">git tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other">other</a></li>
<li class="toctree-l3"><a class="reference internal" href="#undo">undo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#repo">repo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick Start</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#init">init</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#links">Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting">setting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tools">Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../command_line.html">Command 常用指令</a></li>
<li class="toctree-l1"><a class="reference internal" href="../os_desktop.html">OS &amp; Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx.html">Sphinx - reST (reStructuredText)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws_eb_flask.html">Deploying Flask (Python) to AWS Elastic Beanstalk</a></li>
<li class="toctree-l1"><a class="reference internal" href="vagrant_and_docker.html">Vagrant, Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="pelican.html">Pelican</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmux.html">tmux</a></li>
<li class="toctree-l1"><a class="reference internal" href="excel.html">Excel</a></li>
<li class="toctree-l1"><a class="reference internal" href="pandas.html">Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../windows-wsl.html">Windows WSL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../qna.html">問題解決</a></li>
</ul>
<p class="caption"><span class="caption-text">Database</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../database/database.html">Database筆記</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database/mysql.html">MySQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database/postgresql.html">PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database/sqlite.html">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database/mongodb.html">MongoDB</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CompDocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>GIT</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/soft/git.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="git">
<h1>GIT<a class="headerlink" href="#git" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">date</dt>
<dd class="field-odd"><p>2013-03-23</p>
</dd>
<dt class="field-even">category</dt>
<dd class="field-even"><p>computer</p>
</dd>
<dt class="field-odd">tags</dt>
<dd class="field-odd"><p>docs</p>
</dd>
</dl>
<div class="section" id="how-to">
<h2>How to<a class="headerlink" href="#how-to" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sync-remote-repo">
<h3>sync remote repo<a class="headerlink" href="#sync-remote-repo" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git fetch &lt;remote name&gt; <span class="c1"># fetch specific remote branches</span>
$ git fetch --all <span class="c1"># fetch all remote branches</span>
<span class="c1"># same as</span>
$ git remote update

git pull <span class="c1"># has upstream</span>
<span class="c1"># same as</span>
$ git fetch &lt;remote name&gt; <span class="o">&amp;&amp;</span> git merge &lt;remote name&gt; &lt;branch name&gt;
$ git pull &lt;remote name&gt; &lt;branch_name&gt; <span class="c1"># no upstream</span>
$ git pull --rebase
</pre></div>
</div>
</div>
<div class="section" id="commit-merge-commit">
<h3>減少 commit(merge commit )<a class="headerlink" href="#commit-merge-commit" title="Permalink to this headline">¶</a></h3>
<p>善用 git revert, git-bisect, git-rebase -i</p>
<p><a class="reference external" href="https://crealytics.com/blog/2010/07/09/5-reasons-keeping-git-commits-small/">5 Reasons for Keeping Your Git Commits as Small as You Can | Crealytics GmbH</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># a -&gt; b1 -&gt; b2 要變成 a -&gt; b</span>
<span class="n">git</span><span class="o">-</span><span class="n">rebase</span> <span class="o">-</span><span class="n">i</span> <span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="nb">hash</span><span class="p">]</span>

<span class="c1"># pick b1</span>
<span class="c1"># pick b2 # 改成 squash b2</span>
<span class="c1"># 修改 commit message (可以 commit b2 的 message)</span>
<span class="c1"># 存檔離開就好了</span>
</pre></div>
</div>
</div>
<div class="section" id="git-clonebranch">
<h3>git clone某一個branch<a class="headerlink" href="#git-clonebranch" title="Permalink to this headline">¶</a></h3>
<p>以github的Flask當例子，要抓Flask的website branch</p>
<p>先git clone一份Flask，看所有的branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
<p>可看到除了master外有一個remotes/origin/website，然後做一個叫website的branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">website</span> <span class="n">remotes</span><span class="o">/</span><span class="n">origin</span><span class="o">/</span><span class="n">website</span>
</pre></div>
</div>
<p>就會抓回到website這個branch，或是要直接拉下來看:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">remotes</span><span class="o">/</span><span class="n">origin</span><span class="o">/</span><span class="n">experimental</span>
</pre></div>
</div>
</div>
<div class="section" id="git-format-patch-commit-diff">
<h3>git format-patch  把修改紀錄依照 commit 分別作出 diff 來<a class="headerlink" href="#git-format-patch-commit-diff" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>git format-patch [HASH] # 把從這個 [HASH] 之後 (不包括[HASH]) 的 commit 都分成一個個檔案的 patch</p>
</div></blockquote>
</div>
<div class="section" id="commit-branch">
<h3>commit 錯 branch<a class="headerlink" href="#commit-branch" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git reset --hard HEAD~1
<span class="c1"># working dir 就會有 還沒 commit 前的狀態</span>
git checkout b newbranch
<span class="c1"># 重新 git add/commit 就好了</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<div class="section" id="git-clone-add">
<h3>git clone / add<a class="headerlink" href="#git-clone-add" title="Permalink to this headline">¶</a></h3>
<p>git clone:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">file</span><span class="p">:</span><span class="o">////</span><span class="n">home</span><span class="o">/</span><span class="n">somebody</span><span class="o">/</span><span class="n">repo</span><span class="o">/</span><span class="n">foo</span><span class="o">.</span><span class="n">git</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">ssh</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/~/</span><span class="n">repo</span><span class="o">/</span><span class="n">foo</span><span class="o">.</span><span class="n">git</span>
    <span class="n">git</span> <span class="n">clone</span> <span class="o">--</span><span class="n">bare</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">repo</span> <span class="c1"># 把原本的repo轉成bare出來</span>
</pre></div>
</div>
<p>clone all branches:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone --mirror git://example.com/repo repo.git # clone all branches
$ mkdir new_proj
$ cd new_proj
$ mv repo.git new_proj/.git
# remove bare=true in .git/config
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>git pull origin master相當於git fetch和git merge origin/master</p>
</div>
<p>git add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">-</span><span class="n">a</span>
<span class="n">git</span> <span class="n">add</span> <span class="n">foo</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">-</span><span class="n">u</span> <span class="c1"># 只加修改過的檔案, 新增的檔案不加入.</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">-</span><span class="n">i</span> <span class="c1"># 進入互動模式</span>
</pre></div>
</div>
<p>git rm/mv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">rm</span> <span class="n">foo</span>
<span class="n">git</span> <span class="n">mv</span> <span class="n">foo</span> <span class="n">bar</span>

<span class="n">git</span> <span class="n">rm</span> <span class="o">--</span><span class="n">cached</span> <span class="c1"># 從版本控管裡那掉，保留原檔</span>
</pre></div>
</div>
</div>
<div class="section" id="git-reset-revert">
<h3>git reset / revert<a class="headerlink" href="#git-reset-revert" title="Permalink to this headline">¶</a></h3>
<p>reset: 移動HEAD, 更改SHA referenct(git記錄), 檔案還是目前最新的狀態
還沒commit</p>
<p>revert: rollback, 並且會有一個新的commit(不像reset是回到某個commit) 會保留 commit log</p>
<p>example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 原本</span>
<span class="n">A</span> <span class="o">-&gt;</span> <span class="n">B</span> <span class="o">-&gt;</span> <span class="n">C</span> <span class="o">-&gt;</span>

<span class="c1"># revert, 回到 B, 產生一個新 commit (一路往前)</span>
<span class="n">git</span> <span class="n">revert</span> <span class="n">C</span>
<span class="n">A</span> <span class="o">-&gt;</span> <span class="n">B</span> <span class="o">-&gt;</span> <span class="n">C</span> <span class="o">-&gt;</span> <span class="n">B</span> <span class="o">-&gt;</span>

<span class="c1"># reset, 清掉 commit log, 檔案保留目前狀態 (C變成 unstaged)</span>
<span class="n">git</span> <span class="n">reset</span> <span class="n">B</span>
<span class="n">A</span> <span class="o">-&gt;</span> <span class="n">B</span> <span class="o">-&gt;</span>

<span class="c1"># rebase, 同步 remote 跟 local</span>
<span class="c1"># rebase -i 拿掉某些 commit 不想留下記錄 (要 pick...)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="http://progit.org/2011/07/11/reset.html">Pro Git - Reset Demystified</a></p></li>
<li><p><a class="reference external" href="https://www.atlassian.com/git/tutorials/resetting-checking-out-and-reverting">Reset, Checkout, and Revert | Atlassian Git Tutorial</a></p></li>
</ul>
<p>git reset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>git reset --soft HEAD~ # HEAD指回the parent of HEAD, Index和Working Directory都不動(因為soft嘛)
# 改一改再commit一次, 就是git commit --amend在做的事情一樣
(修改放到staging area?)
git reset [--mixed] HEAD~ # update Staging Area, 沒有打參數預設就是這個 (把stage的檔案給unstage?)
git reset --hard HEAD~ # 完全清除, reset the working tree to the last commit
#會改到檔案要注意
</pre></div>
</div>
<p>Tips: 如果反悔可以用git reflog叫出來, 再reset回來</p>
<p>commit後要回來
git revert (還原commit記錄) # revert是新增一個commit來做還原</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>push後就不能reset了, 如果已經push後就要用revert</p>
</div>
<p>git revert:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">revert</span> <span class="n">HEAD</span> <span class="c1"># 回上一次commit, 並產生一個新的commit log</span>
<span class="n">This</span> <span class="n">will</span> <span class="n">create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">commit</span> <span class="n">which</span> <span class="n">undoes</span> <span class="n">the</span> <span class="n">change</span> <span class="ow">in</span> <span class="n">HEAD</span>
<span class="n">git</span> <span class="n">revert</span> <span class="n">HEAD</span><span class="o">^</span> <span class="c1"># 回上上一次commit</span>
<span class="n">git</span> <span class="n">revert</span> <span class="p">[</span><span class="n">SHA</span><span class="p">]</span> <span class="c1"># 回到此commit **之前**\的狀態, 也是產生一個新的commit log</span>
</pre></div>
</div>
</div>
<div class="section" id="git-log">
<h3>git log<a class="headerlink" href="#git-log" title="Permalink to this headline">¶</a></h3>
<p>git log:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">stat</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">stat</span> <span class="o">--</span><span class="n">summary</span> <span class="c1"># 查每個版本間的更動檔案和行數</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">pretty</span><span class="o">=</span><span class="nb">format</span><span class="p">:</span><span class="s1">&#39;%h : </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">--</span><span class="n">date</span><span class="o">-</span><span class="n">order</span> <span class="o">--</span><span class="n">graph</span> <span class="c1"># 依照時間排序</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">since</span><span class="o">=</span><span class="s2">&quot;1 day ago&quot;</span> <span class="c1"># 今天的</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">pretty</span><span class="o">=</span><span class="nb">format</span><span class="p">:</span><span class="s2">&quot;%h was </span><span class="si">%a</span><span class="s2">n, </span><span class="si">%a</span><span class="s2">r, message: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="p">(</span><span class="o">--</span><span class="n">graph</span><span class="p">)</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="nb">all</span> <span class="c1"># 秀出所有的 log (含 branch)</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">-</span><span class="n">p</span> <span class="c1"># 將所有 log 和修改過得檔案內容列出</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">-</span><span class="n">S</span><span class="s1">&#39;foo()&#39;</span> <span class="c1"># log 裡面有 foo() 這字串的.</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">pretty</span><span class="o">=</span><span class="n">oneline</span> <span class="c1"># 秀 log 的方式</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">pretty</span><span class="o">=</span><span class="n">short</span> <span class="c1"># 秀 log 的方式</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">pretty</span><span class="o">=</span><span class="nb">format</span><span class="p">:</span><span class="s1">&#39;%h was </span><span class="si">%a</span><span class="s1">n, </span><span class="si">%a</span><span class="s1">r, message: </span><span class="si">%s</span><span class="s1">&#39;</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">pretty</span><span class="o">=</span><span class="nb">format</span><span class="p">:</span><span class="s1">&#39;%h : </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">--</span><span class="n">graph</span> <span class="c1"># 會有簡單的文字圖形化, 分支等.</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">pretty</span><span class="o">=</span><span class="nb">format</span><span class="p">:</span><span class="s1">&#39;%h : </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">--</span><span class="n">topo</span><span class="o">-</span><span class="n">order</span> <span class="o">--</span><span class="n">graph</span> <span class="c1"># 依照主分支排序</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">pretty</span><span class="o">=</span><span class="nb">format</span><span class="p">:</span><span class="s1">&#39;%h : </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">--</span><span class="n">date</span><span class="o">-</span><span class="n">order</span> <span class="o">--</span><span class="n">graph</span> <span class="c1"># 依照時間排序</span>

<span class="n">git</span> <span class="n">rev</span><span class="o">-</span><span class="nb">list</span> <span class="o">--</span><span class="n">count</span> <span class="p">[</span><span class="n">HEAD</span><span class="o">/</span><span class="n">master</span><span class="o">...</span><span class="p">]</span> <span class="c1"># sum commits</span>
<span class="n">git</span> <span class="n">shortlog</span> <span class="o">-</span><span class="n">s</span> <span class="c1"># sum by author</span>
</pre></div>
</div>
<p>awesome analytic git log, <strong>gitstats</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apt-get install gitstats
$ gitstats /path/to/repo output_dir #ex: gitstats . out
</pre></div>
</div>
<p><a class="reference external" href="http://gitstats.sourceforge.net/">GitStats - git history statistics generator</a></p>
</div>
<div class="section" id="git-commit-checkout-stash">
<h3>git commit / checkout / stash<a class="headerlink" href="#git-commit-checkout-stash" title="Permalink to this headline">¶</a></h3>
<p>git commit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;foo message&#39;</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">--</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span> <span class="c1"># 假commit</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">verify</span> <span class="c1"># 不檢查每行程式碼最後是否有空白或tab</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">--</span><span class="n">amend</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;edited message&#39;</span> <span class="c1"># 改最後一次commit的的message</span>
<span class="c1"># 通常出現錯誤&quot;You have some suspicious patch lines&quot;時用</span>
</pre></div>
</div>
<p>git checkout:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">branch</span> <span class="c1"># 切換 branch</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">filename</span> <span class="c1"># 從local repo抓回</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">HEAD</span> <span class="o">.</span>  <span class="n">TODO</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">xxxx</span> <span class="o">.</span> <span class="c1"># 將所有檔案都 checkout 出來(xxxx commit 的版本, xxxx 是 commit 的編號前四碼), 注意, 若有修改的檔案都會被還原到上一版. TODO</span>
</pre></div>
</div>
<p>git stash:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">stash</span> <span class="c1">#  丟進暫存區</span>
<span class="n">git</span> <span class="n">stash</span> <span class="nb">list</span> <span class="c1"># 列出所有暫存區的資料</span>
<span class="n">git</span> <span class="n">stash</span> <span class="n">pop</span> <span class="c1"># 取出最新的一筆, 並移除.</span>
<span class="n">git</span> <span class="n">stash</span> <span class="n">apply</span> <span class="c1"># 取出最新的一筆 stash 暫存資料. 但是 stash 資料不移除</span>
<span class="n">git</span> <span class="n">stash</span> <span class="n">clear</span> <span class="c1"># 把 stash 都清掉</span>
</pre></div>
</div>
</div>
<div class="section" id="git-branch-merge">
<h3>git branch / merge<a class="headerlink" href="#git-branch-merge" title="Permalink to this headline">¶</a></h3>
<p>git branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">branch</span> <span class="c1"># 看目前的branch</span>
<span class="n">git</span> <span class="n">branch</span> <span class="n">abcd</span> <span class="c1"># 開一個名為abcd的新branch</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">d</span> <span class="n">abcd</span> <span class="c1"># 刪除abcd</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">abcd</span><span class="p">,</span> <span class="n">移到abcd</span>
<span class="n">git</span> <span class="n">branch</span> <span class="n">abcd</span> <span class="c1"># 開新branch, 但不移駕</span>
<span class="n">git</span> <span class="n">co</span> <span class="o">-</span><span class="n">b</span> <span class="n">abcd</span> <span class="n">開新branch</span><span class="p">,</span> <span class="n">而且移駕到新開的branch</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">m</span> <span class="n">old</span> <span class="n">new</span> <span class="c1"># rename branch</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">a</span> <span class="c1"># --all, list both remote-tracking branches and local branches</span>
<span class="n">git</span> <span class="n">brnach</span> <span class="o">-</span><span class="n">r</span> <span class="c1"># list or delete (-d) the remote-tracking branches</span>
</pre></div>
</div>
<p>git merge:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">mergetool</span> <span class="n">kdiff3</span>
<span class="n">git</span> <span class="n">merge</span> <span class="o">--</span><span class="n">abort</span><span class="p">,</span> <span class="n">不要merge了</span>

<span class="n">git</span> <span class="n">fetch</span> <span class="n">origin</span>
<span class="n">git</span> <span class="n">rebase</span> <span class="o">-</span><span class="n">i</span> <span class="n">origin</span><span class="o">/</span><span class="n">master</span>
</pre></div>
</div>
<p>git分master跟branchA, 在master下 <strong>$ git merge branchA</strong> 會把branchA更改過的merge到master裡, 反之, 在branchA下 <strong>$ git merge master</strong> 會把master更新的家到branchA, branchA改過的不會影響master</p>
</div>
<div class="section" id="git-tag">
<h3>git tag<a class="headerlink" href="#git-tag" title="Permalink to this headline">¶</a></h3>
<p>加tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">tag</span> <span class="o">-</span><span class="n">a</span> <span class="n">v0</span><span class="o">.</span><span class="mi">2</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;this is version 0.2&quot;</span>
<span class="n">git</span> <span class="n">tag</span> <span class="o">-</span><span class="n">a</span> <span class="n">v0</span><span class="o">.</span><span class="mf">1.1</span> <span class="c1">#abc123 為某版本加tag</span>
</pre></div>
</div>
<dl class="simple">
<dt>看此tag的log::</dt><dd><p>git show v0.1.2</p>
</dd>
</dl>
<p>刪除:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">tag</span> <span class="o">-</span><span class="n">d</span> <span class="n">v0</span><span class="o">.</span><span class="mf">1.2</span>
</pre></div>
</div>
</div>
<div class="section" id="other">
<h3>other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h3>
<p>git reflog</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>把之前的記錄都叫出來, 包括被git reset掉的, 如果時間久的話會被git洗掉
然後再$ git reset --hard HASH 就回去了
</pre></div>
</div>
<p><a class="reference external" href="http://stackoverflow.com/questions/5473/undoing-a-git-reset-hard-head1">version control - Undoing a git reset –hard HEAD~1 - Stack Overflow</a></p>
</div>
<div class="section" id="undo">
<h3>undo<a class="headerlink" href="#undo" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>還沒commit (local)</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span> <span class="pre">--hard</span> <span class="pre">HEAD</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">HEAD</span> <span class="pre">hello.rb</span></code></p></li>
</ul>
</li>
<li><p>push 後發現錯誤 (public)</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span> <span class="pre">HEAD</span></code> # 回上個commit, 並建立一新commit</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span> <span class="pre">HEAD^</span></code> # 回上上個commit, 並建立一新commit</p></li>
</ul>
</li>
<li><p>改 comment message</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">--amend</span></code></p>
</li>
<li><p>[branch] 在 master 改完, 要把更新改到 branch</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">feature</span></code>, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span> <span class="pre">--hard</span> <span class="pre">origin/master</span></code>, and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">feature</span></code> # 不要用 <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span></code> (因爲還沒要切到 branch, 只是先開 branch)</p>
</li>
<li><p>大量 undo/redo</p>
<p>改了一堆後, 發現另一個方法比較好, 有些 commit 要, 有些不要</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span> <span class="pre">-i</span> <span class="pre">&lt;earlier</span> <span class="pre">SHA&gt;</span></code> # -i: interactive, squash, fixup, pick</p>
</li>
<li><p><a class="reference external" href="http://book.git-scm.com/4_undoing_in_git_-_reset,_checkout_and_revert.html">Git Book - Undoing in Git - Reset, Checkout and Revert</a></p></li>
<li><p><a class="reference external" href="https://github.com/blog/2019-how-to-undo-almost-anything-with-git">How to undo (almost) anything with Git</a> 好用!</p></li>
</ul>
<p>找回刪掉的檔案</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git log -- path/to/file
git checkout <span class="o">{</span>second to last commit<span class="o">}</span> -- path/to/file
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="https://stackoverflow.com/questions/953481/find-and-restore-a-deleted-file-in-a-git-repository">Find and restore a deleted file in a Git repository - Stack Overflow</a></p></li>
</ul>
</div>
<div class="section" id="repo">
<h3>repo<a class="headerlink" href="#repo" title="Permalink to this headline">¶</a></h3>
<p>換 origin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="o">-</span><span class="n">v</span> <span class="p">;</span><span class="n">看</span> <span class="n">remote</span> <span class="n">name</span>
<span class="n">git</span> <span class="n">remote</span> <span class="nb">set</span><span class="o">-</span><span class="n">url</span> <span class="n">origin</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">your</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<p><strong>Tree Roles</strong></p>
<dl class="field-list simple">
<dt class="field-odd">HEAD</dt>
<dd class="field-odd"><p>最後一次的commit (Repo)</p>
</dd>
<dt class="field-even">Index</dt>
<dd class="field-even"><p>目前要commit的 (Staging)</p>
</dd>
<dt class="field-odd">Working Dir</dt>
<dd class="field-odd"><p>目前修改工作區</p>
</dd>
</dl>
<p>set editor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">core</span><span class="o">.</span><span class="n">editor</span> <span class="s2">&quot;vim&quot;</span>
<span class="n">export</span> <span class="n">GIT_EDITOR</span><span class="o">=</span><span class="n">vim</span>
<span class="c1"># or</span>
<span class="n">export</span> <span class="n">VISUAL</span><span class="o">=</span><span class="n">vim</span>
<span class="n">export</span> <span class="n">EDITOR</span><span class="o">=</span><span class="s2">&quot;$VISUAL&quot;</span>
<span class="c1"># VISUAL 跟 EDITOR 都要設</span>
</pre></div>
</div>
<div class="section" id="init">
<h3>init<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h3>
<p>Server (Repository):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">example</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">example</span><span class="o">.</span><span class="n">git</span>
<span class="n">git</span> <span class="o">--</span><span class="n">bare</span> <span class="n">init</span> <span class="c1"># init加--bare, 表示只會在當下目錄放git的東西，不會有原始檔案, 如果要原始檔案再git clone出來就有了</span>
</pre></div>
</div>
<p>Client:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">example</span>
<span class="n">cd</span> <span class="n">example</span>
<span class="n">git</span> <span class="n">init</span>
<span class="n">touch</span> <span class="n">README</span>
<span class="n">git</span> <span class="n">add</span> <span class="n">README</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;first commit&#39;</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">origin</span> <span class="n">ssh</span><span class="p">:</span><span class="o">//</span><span class="n">USERNAME</span><span class="nd">@REMOTE_SERVER</span><span class="o">/~/</span><span class="n">example</span><span class="o">.</span><span class="n">git</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">master</span> <span class="p">(</span><span class="n">第一次之後只要打git</span> <span class="n">push就可以了</span><span class="p">)</span>
</pre></div>
</div>
<p>Remote branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>local(foo)&gt; git push -u origin foo
remote&gt; git checkout -b foo_test origin/foo # 可以不同branch name
# 之後
remote(foo_test)&gt; git pull

# pull remote branch
$ git branch -f remote_branch_name origin/remote_branch_name
$ git checkout remote_branch_name
$ git push origin --delete &lt;remote_branch_name&gt;

# push to remote branch
$ git push origin local_branch_name:remote_branch_name
</pre></div>
</div>
</div>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.slideshare.net/littlebtc/git-5528339">寫給大家的 Git 教學</a></p></li>
<li><p><a class="reference external" href="http://nvie.com/posts/a-successful-git-branching-model/">A successful Git branching model » nvie.com</a> git開發web方法</p></li>
<li><p><a class="reference external" href="https://github.com/github/gitignore">github/gitignore at master - GitHub</a> gitignore大全</p></li>
<li><p><a class="reference external" href="http://gitready.com/">git ready » learn git one commit at a time</a> git教學文(因材施教)</p></li>
<li><p><a class="reference external" href="http://whygitisbetterthanx.com/">Why Git is Better Than X</a></p></li>
<li><p><a class="reference external" href="http://www-cs-students.stanford.edu/~blynn/gitmagic/">Git Magic - Preface</a></p></li>
<li><p><a class="reference external" href="http://ihower.tw/blog/archives/6696/?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed:+ihower+({|ihower.tw|+blog+})&amp;utm_content=Google+Reader">Git 教育訓練課程投影片 (2012) | ihower { blogging }</a></p></li>
<li><p>guides (快速) <a class="reference external" href="https://github.com/thoughtbot/guides/tree/master/protocol/git">guides/protocol/git at master · thoughtbot/guides</a></p></li>
<li><p><a class="reference external" href="https://dev.to/lydiahallie/cs-visualized-useful-git-commands-37p1">🌳🚀 CS Visualized: Useful Git Commands - DEV Community 👩‍💻👨‍💻</a></p></li>
</ul>
</div>
<div class="section" id="setting">
<h2>setting<a class="headerlink" href="#setting" title="Permalink to this headline">¶</a></h2>
<p>Git 2.0 的push.default把預設的設定從 <cite>matching</cite> 改稱 <cite>simple</cite>, matching: 預設把目前全部branch push上去, simple只會push目前所在的branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">push</span><span class="o">.</span><span class="n">default</span> <span class="p">[</span><span class="n">matching</span><span class="o">|</span><span class="n">simple</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p><a class="reference external" href="http://git-scm.com/docs/git-config.html">git-config</a></p>
</div>
<div class="section" id="tools">
<h2>Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><cite>casperdcl/git-fame: Pretty-print `git</cite> repository collaborators sorted by contributions. &lt;<a class="reference external" href="https://github.com/casperdcl/git-fame">https://github.com/casperdcl/git-fame</a>&gt;`__
git-fame</p></li>
<li><p><a class="reference external" href="https://github.com/arzzen/git-quick-stats">arzzen/git-quick-stats: ▁▅▆▃▅ Git quick statistics is a simple and efficient way to access various statistics in git repository.</a>
git-quick-stats</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../command_line.html" class="btn btn-neutral float-right" title="Command 常用指令" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="emacs.html" class="btn btn-neutral float-left" title="Emacs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2015, Suhen

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>